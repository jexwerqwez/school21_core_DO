# Операционные системы UNIX/Linux (Базовый).
Установка и обновления системы Linux. Основы администрирования.

## Содержание
1. [Установка ОС](#part-1-установка-ос)  
2. [Создание пользователя](#part-2-создание-пользователя)  
3. [Настройка сети ОС](#part-3-настройка-сети-ос)   
4. [Обновление ОС](#part-4-обновление-ос)  
5. [Использование команды  sudo](#part-5-использование-команды-sudo)  
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
11. [Использование утилиты df](#part-11-использование-утилиты-df)    
12. [Использование утилиты du](#part-12-использование-утилиты-du)    
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)   

## Part 1. Установка ОС

- Установка Ubuntu 20.04 Server LTS без графического интерфейса:

![a](./Screenshots/1.png)

## Part 2. Создание пользователя

- Создание пользователя и добавление его в группу adm:

![a](./Screenshots/2.png)

- Проверка вывода команды \ `cat /etc/passwd`:

![a](./Screenshots/3.png)

- Проверка добавления пользователя в группу adm:

![a](./Screenshots/4.png)

## Part 3. Настройка сети ОС

- Задание названия машины вида user-1 и его проверка:

![a](./Screenshots/5.png)

- Установка временной зоны:

![a](./Screenshots/6.png)

- Вывод названий сетевых интерфейсов:

![a](./Screenshots/7.png)

lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1 (dns-имя – localhost). 

- Получение ip адреса устройства:

![a](./Screenshots/8.png)

DHCP (Dynamic Host Configuration Protocol) — протокол прикладного уровня модели TCP/IP, служит для назначения IP-адреса клиенту.

- Вывод на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза:

![a](./Screenshots/9.png)

- Установка статичных настроек ip, gw, dns:

![a](./Screenshots/10.png)

- Проверка статичных сетевых настроек (ip, gw, dns) после перезагрузки виртуальной машины:

![a](./Screenshots/11.png)

- Пингование удаленных хостов 1.1.1.1 и ya.ru:

![a](./Screenshots/12.png)

## Part 4. Обновление ОС

- Обновление системных пакетов:  

![a](./Screenshots/13.png)

## Part 5. Использование команды **sudo**

- Выдача разрешения пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo и изменение hostname ОС от его имени:

![a](./Screenshots/14.png)

*sudo* (англ. Substitute User and do, дословно «подменить пользователя и выполнить») — утилита, позволяющая выполнить команду от имени другого пользователя, обычно от root. Смысл выполнения команды от root в том, что у него повышенные права доступа и, применяя sudo, обычный пользователь может выполнить те действия, на которые у него недостаточно прав.

## Part 6. Установка и настройка службы времени

- Вывод времени и часового пояса:

![a](./Screenshots/15.png)

## Part 7. Установка и использование текстовых редакторов 

- установка VIM, NANO, MCEDIT:

![a](./Screenshots/16.png)

- создание тестовых файлов:

![a](./Screenshots/17.png)

- работа в VIM с сохранением:

![a](./Screenshots/18.png)

1. Переход в режим вставки нажатием на клавишу I;
2. Ввод никнейма;
3. Нажатие на Esc;
4. Ввод wq.

- работа в NANO с сохранением:

![a](./Screenshots/19.png)

1. Ввод никнейма;
2. Нажатие Ctrl + X;
3. Ввод Y.

- работа в MCEDIT с сохранением:

![a](./Screenshots/20.png)

1. Ввод никнейма;
2. Нажатие F2;
3. Нажатие F10.


- работа в VIM без сохранения:

![a](./Screenshots/21.png)

1. Переход в режим вставки нажатием на клавишу I;
2. Ввод 21 School 21;
3. Нажатие на Esc;
4. Ввод q!.

- работа в NANO без сохранения:

![a](./Screenshots/22.png)

1. Ввод 21 School 21;
2. Нажатие Ctrl + X;
3. Ввод N.

- работа в MCEDIT без сохранения:

![a](./Screenshots/23.png)

1. Ввод 21 School 21;
2. Нажатие F10;
3. Нажатие Нет.


- работа в VIM по поиску и замене:

![a](./Screenshots/24.png)

Поиск через команду /текст

![a](./Screenshots/25.png)

Замена через команду :%s/старый_текст/новый_текст

- работа в NANO по поиску и замене:

![a](./Screenshots/26.png)

Поиск через Ctr+W и ввод текста

![a](./Screenshots/27.png)

Замена через команду Ctr+\ и ввод текста

- работа в MCEDIT с сохранением:

![a](./Screenshots/28.png)

Поиск через F7

![a](./Screenshots/29.png)

Замена через F4
## Part 8. Установка и базовая настройка сервиса **SSHD**

- Установка службы SSHd:

![a](./Screenshots/30.png)

- Добавление автостарт службы при загрузке системы:

![a](./Screenshots/31.png)
![a](./Screenshots/32.png)

- Перенастройка службы SSHd на порт 2022:

![a](./Screenshots/33.png)

- Отображение наличия процесса sshd, используя команду ps:

![a](./Screenshots/35.png)

Команда ps выводит статистику и информацию о состоянии процессов в системе, в том числе ИД процесса или нити, объем выполняемого ввода-вывода и используемый объем ресурсов процессора и памяти.

-a  вывод на дисплей процессы всех пользователей, за исключением тех процессов, которые не связаны с терминалом и процессами группы лидеров.

-u  подставки для ориентированных на пользователя формате, который обеспечивает подробную информацию о процессах.

-x  перечисление процессов без управляющего терминала. В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме.

- Перезагрузка системы:

![a](./Screenshots/34.png)

- Вывод команды netstat -tan:

![a](./Screenshots/36.png)

Ключи:

-a	показывать состояние всех сокетов;

-n	показывать ip адрес, а не сетевое имя;

-t  показывать список активных портов TCP.

Столбцы:

-Proto   протокол, используемый сокетом;

-Recv-Q  количество байтов, не скопированных пользовательской программой, подключенной к этому сокету;

-Send-Q  количество неподтвержденных байтов удаленного хоста;

-Local Address  локальный адрес (имя локального хоста) и номер порта сокета;

-Foreign Address  удаленный адрес (имя удаленного хоста) и номер порта сокета;

-State  состояние сокета;

-0.0.0.0  подключение может быть выполнено с/на любой адрес LISTEN готовность к установке соединения.

## Part 9. Установка и использование утилит **top**, **htop**

- Установка и запуск top:

![a](./Screenshots/37.png)

-uptime: 6 min;

-количество авторизованных пользователей: 1 user;

-общая загрузка системы: 0,00, 0,07, 0,05;

-общее количество процессов: 103 total, 1 running, 102 sleeping, 0 stopped, 0 zombie;

-загрузка cpu: 0,0 us, 0,0 sy, 0,0 ni, 100,0 id, 0,0 wa, 0,0 hi, 0,0 si, 0,0 st;

-загрузка памяти: 4921,8 total, 4360,1 free, 163,3 used, 398,3 buff/cache;

-pid процесса занимающего больше всего памяти 1117;

-pid процесса, занимающего больше всего процессорного времени 1.

- Установка и запуск htop:

![a](./Screenshots/38.png)

-Сортировка по PID:

![a](./Screenshots/39.png)

-Сортировка по PERCENT_CPU:

![a](./Screenshots/40.png)

-Сортировка по PERCENT_MEM:

![a](./Screenshots/41.png)

-Сортировка по TIME:

![a](./Screenshots/42.png)

-Фильтрация для процесса sshd:

![a](./Screenshots/43.png)

-с процессом syslog, найденным, используя поиск:

![a](./Screenshots/44.png)

-с добавленным выводом hostname, clock и uptime:

![a](./Screenshots/45.png)

## Part 10. Использование утилиты **fdisk**

- Запуск команды fdisk -l.

![a](./Screenshots/46.png)

-Название /dev/sda;

-Размер 7 GiB;

-Количество секторов  14680064;

![a](./Screenshots/47.png)

-Размер swap 0.

## Part 11. Использование утилиты **df** 

- Запуск команды df:

![a](./Screenshots/48.png)

-размер корневого раздела (/):  5327504;
-размер занятого пространства корневого раздела (/):  2894176;
-размер свободного пространства корневого раздела (/):  2141900;
-процент использования корневого раздела (/): 58%;
-Единица измерения в выводе:  1K-blocks.

- Запуск команды df -Th.

![a](./Screenshots/49.png)

- размер корневого раздела (/): 5,1G;
- размер занятого пространства корневого раздела (/): 2,8G;
- размер свободного пространства корневого раздела (/): 2,1G;
- процент использования корневого раздела (/):  58%;
- Тип файловой системы для раздела: ext4.

## Part 12. Использование утилиты **du**

- Запуск команды du:

![a](./Screenshots/50.png)

- Вывод размера папок /home, /var, /var/log:

![a](./Screenshots/51.png)

- Вывод размера всего содержимого в /var/log:

![a](./Screenshots/52.png)

## Part 13. Установка и использование утилиты **ncdu**

- Установка утилиты ncdu:

![a](./Screenshots/53.png)

- Вывод размера папки /home:

![a](./Screenshots/54.png)

- Вывод размера папки /var:

![a](./Screenshots/55.png)

- Вывод размера папки /var/log:

![a](./Screenshots/56.png)

## Part 14. Работа с системными журналами

- Открытие для просмотра:

-/var/log/dmesg:

![a](./Screenshots/57.png)

-/var/log/syslog:

![a](./Screenshots/58.png)

-/var/log/auth.log:

![a](./Screenshots/59.png)

- Время последней успешной авторизации, имя пользователя и метод входа в систему:

![a](./Screenshots/60.png)

-время авторизации Aug 8 00:33

-имя пользователя lesleyem

-метод входа в систему tty1

- Перезапуск службы SSHd с помощью sudo systemctl restart ssh и сообщение о рестарте службы в логах:

![a](./Screenshots/61.png)

## Part 15. Использование планировщика заданий **CRON**

- Запуск команды uptime через каждые 2 минуты, используя планировщик заданий:

![a](./Screenshots/62.png)

- Вывод на экран списка текущих заданий для CRON:

![a](./Screenshots/63.png)

- Вывод на экран списка системных задач:

![a](./Screenshots/64.png)

- Удаление всех заданий из планировщика заданий.

![a](./Screenshots/65.png)
